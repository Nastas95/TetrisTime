<!DOCTYPE html>
<html>
  <!-- I'm obviously not a web programmer =/ -->
  <head>
    <title>Configuration</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
    <script type="text/javascript">
      var options = {};
      
      function parse_options() {
        if (location.search) {
          var prefix = "?options="
          if (location.search.indexOf(prefix) == 0) {
            var json_str = unescape(location.search.substring(prefix.length));
            console.log("Got options: " + json_str);
            options = JSON.parse(json_str);

            for (var key in options) {
              var name = "#" + key + "_" + options[key];
              console.log("checking " + name);
              $(name).prop("checked", true);
              $("input[name='" + key + "']").checkboxradio("refresh");
            }
          }
        }
      }
      function save() {
        $("input:checked").each(function (index) {
          options[this.name] = Number(this.value);
        })
        console.log("Save: " + JSON.stringify(options));
        document.location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
      }
      function cancel() {
        console.log("Cancel");
        document.location = "pebblejs://close";
      }
    </script>
  </head>
  <body onload="parse_options()">
    <h2>Configuration</h2>
    <p>
      <h3>Theme</h3>
      <input name="LIGHT_THEME" id="LIGHT_THEME_0" value="0" checked="checked" type="radio">
      <label for="LIGHT_THEME_0">Dark theme</label>
      <input name="LIGHT_THEME" id="LIGHT_THEME_1" value="1" type="radio">
      <label for="LIGHT_THEME_1">Light theme</label>
    </p>
    <p>
      <h3>Digits style</h3>
      <input name="DIGITS_MODE" id="DIGITS_MODE_0" value="0" checked="checked" type="radio">
      <label for="DIGITS_MODE_0">Default: asymmetric for 12h clock, compact for 24h clock</label>
      <input name="DIGITS_MODE" id="DIGITS_MODE_1" value="1" type="radio">
      <label for="DIGITS_MODE_1">Compact digits</label>
      <input name="DIGITS_MODE" id="DIGITS_MODE_2" value="2" type="radio">
      <label for="DIGITS_MODE_2">Sparse digits</label>
    </p>
    <p>
      <h3>Colon style</h3>
      <input name="ANIMATE_SECOND_DOT" id="ANIMATE_SECOND_DOT_0" value="0" checked="checked" type="radio">
      <label for="ANIMATE_SECOND_DOT_0">Static colon</label>
      <input name="ANIMATE_SECOND_DOT" id="ANIMATE_SECOND_DOT_1" value="1" type="radio">
      <label for="ANIMATE_SECOND_DOT_1">Blinking colon</label>
    </p>
    <p>
      <h3>Date mode</h3>
      <input name="DATE_MODE" id="DATE_MODE_0" value="0" checked="checked" type="radio">
      <label for="DATE_MODE_0">Inverted date</label>
      <input name="DATE_MODE" id="DATE_MODE_1" value="1" type="radio">
      <label for="DATE_MODE_1">Same color date</label>
      <input name="DATE_MODE" id="DATE_MODE_2" value="2" type="radio">
      <label for="DATE_MODE_2">No date</label>
    </p>
    <p>
      <h3>Date first line format</h3>
      <input name="DATE_MONTH_FORMAT" id="DATE_MONTH_FORMAT_0" value="0" checked="checked" type="radio">
      <label for="DATE_MONTH_FORMAT_0">Month and day</label>
      <input name="DATE_MONTH_FORMAT" id="DATE_MONTH_FORMAT_1" value="1" type="radio">
      <label for="DATE_MONTH_FORMAT_1">Day and month</label>
      <input name="DATE_MONTH_FORMAT" id="DATE_MONTH_FORMAT_2" value="2" type="radio">
      <label for="DATE_MONTH_FORMAT_2">Weekday and day</label>
      <input name="DATE_MONTH_FORMAT" id="DATE_MONTH_FORMAT_3" value="3" type="radio">
      <label for="DATE_MONTH_FORMAT_3">Day and weekday</label>
    </p>
    <p>
      <h3>Date second line format</h3>
      <input name="DATE_WEEKDAY_FORMAT" id="DATE_WEEKDAY_FORMAT_0" value="0" checked="checked" type="radio">
      <label for="DATE_WEEKDAY_FORMAT_0">Marked weekday</label>
      <input name="DATE_WEEKDAY_FORMAT" id="DATE_WEEKDAY_FORMAT_1" value="1" type="radio">
      <label for="DATE_WEEKDAY_FORMAT_1">Text weekday</label>
      <input name="DATE_WEEKDAY_FORMAT" id="DATE_WEEKDAY_FORMAT_2" value="2" type="radio">
      <label for="DATE_WEEKDAY_FORMAT_2">Empty</label>
    </p>
    <p>
      <div class="ui-block-b" style="float:left;margin:10"><button type="submit" data-theme="a" id="save" onclick="save()">Save</button></div>
      <div class="ui-block-a" style="float:right;margin:10"><button type="submit" data-theme="d" id="cancel" onclick="cancel()">Cancel</button></div>
    </p>
  </body>
</html>
